import{s as J,n as A,o as Pe,r as he,c as Se,C as W,E as lt,b as ge,F as _e}from"../chunks/scheduler.B_OghNyv.js";import{S as Q,i as Y,z as se,g as P,d as m,e as g,t as B,s as R,c as _,a as w,b as H,f as L,l as K,m as f,h as b,y as $,j as oe,E as je,x as Oe,C as G,q as fe,n as M,o as pe,p as x,r as X,u as Z,v as ee,w as te,F as ke,k as pt}from"../chunks/index.C9ik1EU3.js";import{P as mt}from"../chunks/public.D4yePgXC.js";import{H as bt,w as Ne}from"../chunks/entry.BsLt1Fvm.js";import{M as at}from"../chunks/Message.CR8xJ3sE.js";import{d as de,c as ye,f as Ve,a as we,h as vt,b as gt}from"../chunks/notifications.DAgaz3bm.js";const _t=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class ie extends Error{constructor(e){var t,s,n,i;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,ie.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof ie||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(i=(n=(s=this.originalError)==null?void 0:s.cause)==null?void 0:n.message)!=null&&i.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const Ee=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function kt(o,e){const t={};if(typeof o!="string")return t;const s=Object.assign({},e||{}).decode||yt;let n=0;for(;n<o.length;){const i=o.indexOf("=",n);if(i===-1)break;let r=o.indexOf(";",n);if(r===-1)r=o.length;else if(r<i){n=o.lastIndexOf(";",i-1)+1;continue}const l=o.slice(n,i).trim();if(t[l]===void 0){let c=o.slice(i+1,r).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=s(c)}catch{t[l]=c}}n=r+1}return t}function Fe(o,e,t){const s=Object.assign({},t||{}),n=s.encode||wt;if(!Ee.test(o))throw new TypeError("argument name is invalid");const i=n(e);if(i&&!Ee.test(i))throw new TypeError("argument val is invalid");let r=o+"="+i;if(s.maxAge!=null){const l=s.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(l)}if(s.domain){if(!Ee.test(s.domain))throw new TypeError("option domain is invalid");r+="; Domain="+s.domain}if(s.path){if(!Ee.test(s.path))throw new TypeError("option path is invalid");r+="; Path="+s.path}if(s.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(s.expires)||isNaN(s.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():s.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function yt(o){return o.indexOf("%")!==-1?decodeURIComponent(o):o}function wt(o){return encodeURIComponent(o)}let ct;function ve(o){if(o)try{const e=decodeURIComponent(ct(o.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function dt(o,e=0){let t=ve(o);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}ct=typeof atob=="function"?atob:o=>{let e=String(o).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,s,n=0,i=0,r="";s=e.charAt(i++);~s&&(t=n%4?64*t+s:s,n++%4)?r+=String.fromCharCode(255&t>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return r};const Me="pb_auth";class St{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!dt(this.token)}get isAdmin(){return ve(this.token).type==="admin"}get isAuthRecord(){return ve(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Me){const s=kt(e||"")[t]||"";let n={};try{n=JSON.parse(s),(typeof n===null||typeof n!="object"||Array.isArray(n))&&(n={})}catch{}this.save(n.token||"",n.model||null)}exportToCookie(e,t=Me){var c,a;const s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},n=ve(this.token);s.expires=n!=null&&n.exp?new Date(1e3*n.exp):new Date("1970-01-01"),e=Object.assign({},s,e);const i={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let r=Fe(t,JSON.stringify(i),e);const l=typeof Blob<"u"?new Blob([r]).size:r.length;if(i.model&&l>4096){i.model={id:(c=i==null?void 0:i.model)==null?void 0:c.id,email:(a=i==null?void 0:i.model)==null?void 0:a.email};const u=["collectionId","username","verified"];for(const d in this.model)u.includes(d)&&(i.model[d]=this.model[d]);r=Fe(t,JSON.stringify(i),e)}return r}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let s=this._onChangeCallbacks.length-1;s>=0;s--)if(this._onChangeCallbacks[s]==e)return delete this._onChangeCallbacks[s],void this._onChangeCallbacks.splice(s,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Ct extends St{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let s=t;typeof t!="string"&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class me{constructor(e){this.client=e}}class Tt extends me{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,s){return s=Object.assign({method:"POST",body:{email:e,template:t}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)}async generateAppleClientSecret(e,t,s,n,i,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:s,privateKey:n,duration:i}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class xe extends me{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then(n=>{var i;return n.items=((i=n.items)==null?void 0:i.map(r=>this.decode(r)))||[],n})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(s=>{var n;if(!((n=s==null?void 0:s.items)!=null&&n.length))throw new ie({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return s.items[0]})}async getOne(e,t){if(!e)throw new ie({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(s=>this.decode(s))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(s=>this.decode(s))}async update(e,t,s){return s=Object.assign({method:"PATCH",body:t},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(n=>this.decode(n))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],n=async i=>this.getList(i,e||500,t).then(r=>{const l=r.items;return s=s.concat(l),l.length==r.perPage?n(i+1):s});return n(1)}}function ne(o,e,t,s){const n=s!==void 0;return n||t!==void 0?n?(console.warn(o),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,s),e):Object.assign(e,t):e}function qe(o){var e;(e=o._resetAutoRefresh)==null||e.call(o)}class Et extends xe{get baseCrudPath(){return"/api/admins"}async update(e,t,s){return super.update(e,t,s).then(n=>{var i,r;return((i=this.client.authStore.model)==null?void 0:i.id)===n.id&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,n),n})}async delete(e,t){return super.delete(e,t).then(s=>{var n,i;return s&&((n=this.client.authStore.model)==null?void 0:n.id)===e&&((i=this.client.authStore.model)==null?void 0:i.collectionId)===void 0&&this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,s,n){let i={method:"POST",body:{identity:e,password:t}};i=ne("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",i,s,n);const r=i.autoRefreshThreshold;delete i.autoRefreshThreshold,i.autoRefresh||qe(this.client);let l=await this.client.send(this.baseCrudPath+"/auth-with-password",i);return l=this.authResponse(l),r&&function(a,u,d,h){qe(a);const p=a.beforeSend,v=a.authStore.model,y=a.authStore.onChange((k,S)=>{(!k||(S==null?void 0:S.id)!=(v==null?void 0:v.id)||(S!=null&&S.collectionId||v!=null&&v.collectionId)&&(S==null?void 0:S.collectionId)!=(v==null?void 0:v.collectionId))&&qe(a)});a._resetAutoRefresh=function(){y(),a.beforeSend=p,delete a._resetAutoRefresh},a.beforeSend=async(k,S)=>{var q;const C=a.authStore.token;if((q=S.query)!=null&&q.autoRefresh)return p?p(k,S):{url:k,sendOptions:S};let E=a.authStore.isValid;if(E&&dt(a.authStore.token,u))try{await d()}catch{E=!1}E||await h();const O=S.headers||{};for(let j in O)if(j.toLowerCase()=="authorization"&&C==O[j]&&a.authStore.token){O[j]=a.authStore.token;break}return S.headers=O,p?p(k,S):{url:k,sendOptions:S}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i))),l}async authRefresh(e,t){let s={method:"POST"};return s=ne("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",s).then(this.authResponse.bind(this))}async requestPasswordReset(e,t,s){let n={method:"POST",body:{email:e}};return n=ne("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",n,t,s),this.client.send(this.baseCrudPath+"/request-password-reset",n).then(()=>!0)}async confirmPasswordReset(e,t,s,n,i){let r={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return r=ne("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,n,i),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}const It=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function ut(o){if(o){o.query=o.query||{};for(let e in o)It.includes(e)||(o.query[e]=o[e],delete o[e])}}class ht extends me{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){var r;if(!e)throw new Error("topic must be set.");let n=e;if(s){ut(s);const l="options="+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));n+=(n.includes("?")?"&":"?")+l}const i=function(l){const c=l;let a;try{a=JSON.parse(c==null?void 0:c.data)}catch{}t(a||{})};return this.subscriptions[n]||(this.subscriptions[n]=[]),this.subscriptions[n].push(i),this.isConnected?this.subscriptions[n].length===1?await this.submitSubscriptions():(r=this.eventSource)==null||r.addEventListener(n,i):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,i)}async unsubscribe(e){var s;let t=!1;if(e){const n=this.getSubscriptionsByTopic(e);for(let i in n)if(this.hasSubscriptionListeners(i)){for(let r of this.subscriptions[i])(s=this.eventSource)==null||s.removeEventListener(i,r);delete this.subscriptions[i],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var s;let t=!1;for(let n in this.subscriptions)if((n+"?").startsWith(e)){t=!0;for(let i of this.subscriptions[n])(s=this.eventSource)==null||s.removeEventListener(n,i);delete this.subscriptions[n]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var i;let s=!1;const n=this.getSubscriptionsByTopic(e);for(let r in n){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let l=!1;for(let c=this.subscriptions[r].length-1;c>=0;c--)this.subscriptions[r][c]===t&&(l=!0,delete this.subscriptions[r][c],this.subscriptions[r].splice(c,1),(i=this.eventSource)==null||i.removeEventListener(r,t));l&&(this.subscriptions[r].length||delete this.subscriptions[r],s||this.hasSubscriptionListeners(r)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,s;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let n in this.subscriptions)if((s=this.subscriptions[n])!=null&&s.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let s in this.subscriptions)(s+"?").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let s=3;for(;this.hasUnsentSubscriptions()&&s>0;)s--,await this.submitSubscriptions()}).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const s=this.getSubscriptionsByTopic("PB_CONNECT");for(let n in s)for(let i of s[n])i(e)}).catch(s=>{this.clientId="",this.connectErrorHandler(s)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let s of this.pendingConnects)s.reject(new ie(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[]}}}class Ot extends xe{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,s){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then(n=>{var i,r,l;return((i=this.client.authStore.model)==null?void 0:i.id)!==(n==null?void 0:n.id)||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)==null?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,n),n})}async delete(e,t){return super.delete(e,t).then(s=>{var n,i,r;return!s||((n=this.client.authStore.model)==null?void 0:n.id)!==e||((i=this.client.authStore.model)==null?void 0:i.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)==null?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}async authWithPassword(e,t,s,n){let i={method:"POST",body:{identity:e,password:t}};return i=ne("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/auth-with-password",i).then(r=>this.authResponse(r))}async authWithOAuth2Code(e,t,s,n,i,r,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:s,redirectUrl:n,createData:i}};return c=ne("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,r,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(a=>this.authResponse(a))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},s=(await this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!s)throw new ie(new Error(`Missing or invalid provider "${t.provider}".`));const n=this.client.buildUrl("/api/oauth2-redirect"),i=new ht(this.client);let r=null;function l(){r==null||r.close(),i.unsubscribe()}return t.urlCallback||(r=$e(void 0)),new Promise(async(c,a)=>{var u;try{await i.subscribe("@oauth2",async v=>{const y=i.clientId;try{if(!v.state||y!==v.state)throw new Error("State parameters don't match.");if(v.error||!v.code)throw new Error("OAuth2 redirect error or missing code: "+v.error);const k=Object.assign({},t);delete k.provider,delete k.scopes,delete k.createData,delete k.urlCallback;const S=await this.authWithOAuth2Code(s.name,v.code,s.codeVerifier,n,t.createData,k);c(S)}catch(k){a(new ie(k))}l()});const d={state:i.clientId};(u=t.scopes)!=null&&u.length&&(d.scope=t.scopes.join(" "));const h=this._replaceQueryParams(s.authUrl+n,d);await(t.urlCallback||function(v){r?r.location.href=v:r=$e(v)})(h)}catch(d){l(),a(new ie(d))}})}async authRefresh(e,t){let s={method:"POST"};return s=ne("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",s).then(n=>this.authResponse(n))}async requestPasswordReset(e,t,s){let n={method:"POST",body:{email:e}};return n=ne("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-password-reset",n).then(()=>!0)}async confirmPasswordReset(e,t,s,n,i){let r={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return r=ne("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(e,t,s){let n={method:"POST",body:{email:e}};return n=ne("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-verification",n).then(()=>!0)}async confirmVerification(e,t,s){let n={method:"POST",body:{token:e}};return n=ne("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/confirm-verification",n).then(()=>{const i=ve(e),r=this.client.authStore.model;return r&&!r.verified&&r.id===i.id&&r.collectionId===i.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(e,t,s){let n={method:"POST",body:{newEmail:e}};return n=ne("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-email-change",n).then(()=>!0)}async confirmEmailChange(e,t,s,n){let i={method:"POST",body:{token:e,password:t}};return i=ne("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/confirm-email-change",i).then(()=>{const r=ve(e),l=this.client.authStore.model;return l&&l.id===r.id&&l.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}async unlinkExternalAuth(e,t,s){return s=Object.assign({method:"DELETE"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),s).then(()=>!0)}_replaceQueryParams(e,t={}){let s=e,n="";e.indexOf("?")>=0&&(s=e.substring(0,e.indexOf("?")),n=e.substring(e.indexOf("?")+1));const i={},r=n.split("&");for(const l of r){if(l=="")continue;const c=l.split("=");i[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete i[l]:i[l]=t[l]);n="";for(let l in i)i.hasOwnProperty(l)&&(n!=""&&(n+="&"),n+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(i[l].replace(/%20/g,"+")));return n!=""?s+"?"+n:s}}function $e(o){if(typeof window>"u"||!(window!=null&&window.open))throw new ie(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,s=window.innerWidth,n=window.innerHeight;e=e>s?s:e,t=t>n?n:t;let i=s/2-e/2,r=n/2-t/2;return window.open(o,"popup_window","width="+e+",height="+t+",top="+r+",left="+i+",resizable,menubar=no")}class Pt extends xe{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,s){return s=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+"/import",s).then(()=>!0)}}class Dt extends me{async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send("/api/logs",s)}async getOne(e,t){if(!e)throw new ie({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class At extends me{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class qt extends me{getUrl(e,t,s={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const n=[];n.push("api"),n.push("files"),n.push(encodeURIComponent(e.collectionId||e.collectionName)),n.push(encodeURIComponent(e.id)),n.push(encodeURIComponent(t));let i=this.client.buildUrl(n.join("/"));if(Object.keys(s).length){s.download===!1&&delete s.download;const r=new URLSearchParams(s);i+=(i.includes("?")?"&":"?")+r}return i}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Rt extends me{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class Lt{constructor(e="/",t,s="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=s,this.authStore=t||new Ct,this.admins=new Et(this),this.collections=new Pt(this),this.files=new qt(this),this.logs=new Dt(this),this.settings=new Tt(this),this.realtime=new ht(this),this.health=new At(this),this.backups=new Rt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Ot(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let n=t[s];switch(typeof n){case"boolean":case"number":n=""+n;break;case"string":n="'"+n.replace(/'/g,"\\'")+"'";break;default:n=n===null?"null":n instanceof Date?"'"+n.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(n).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+s+"}",n)}return e}getFileUrl(e,t,s={}){return this.files.getUrl(e,t,s)}buildUrl(e){var s;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(s=window.location.origin)!=null&&s.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildUrl(e);if(this.beforeSend){const n=Object.assign({},await this.beforeSend(s,t));n.url!==void 0||n.options!==void 0?(s=n.url||s,t=n.options||t):Object.keys(n).length&&(t=n,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const n=this.serializeQueryParams(t.query);n&&(s+=(s.includes("?")?"&":"?")+n),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(s,t).then(async n=>{let i={};try{i=await n.json()}catch{}if(this.afterSend&&(i=await this.afterSend(n,i)),n.status>=400)throw new ie({url:n.url,status:n.status,data:i});return i}).catch(n=>{throw new ie(n)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),ut(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const s=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(s);const n=new AbortController;this.cancelControllers[s]=n,t.signal=n.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(const s in e){const n=e[s];if(typeof n!="object"||this.hasBlobField({data:n})){const i=Array.isArray(n)?n:[n];for(let r of i)t.append(s,r)}else{let i={};i[s]=n,t.append("@jsonPayload",JSON.stringify(i))}}return t}hasBlobField(e){for(const t in e){const s=Array.isArray(e[t])?e[t]:[e[t]];for(const n of s)if(typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const s in e){if(e[s]===null)continue;const n=e[s],i=encodeURIComponent(s);if(Array.isArray(n))for(const r of n)t.push(i+"="+encodeURIComponent(r));else n instanceof Date?t.push(i+"="+encodeURIComponent(n.toISOString())):typeof n!==null&&typeof n=="object"?t.push(i+"="+encodeURIComponent(JSON.stringify(n))):t.push(i+"="+encodeURIComponent(n))}return t.join("&")}}function jt(o,e){throw new bt(o,e)}new TextEncoder;let Re;try{Re=new Lt("https://dbrevolution.fly.dev"),Re.admins.authWithPassword("denac.development@gmail.com","parolaD3L@Db")}catch(o){throw jt(500,"Database: "+o.message)}const ce=Re,ae=Ne([]),ue=Ne([]),be=Ne("schedule");var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nt(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(s){var n=Object.getOwnPropertyDescriptor(o,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:function(){return o[s]}})}),t}var Le={exports:{}};const Vt={},xt=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"})),Ut=Nt(xt);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(o,e){var t=Ut,s=t.Buffer;function n(r,l){for(var c in r)l[c]=r[c]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?o.exports=t:(n(t,e),e.Buffer=i);function i(r,l,c){return s(r,l,c)}i.prototype=Object.create(s.prototype),n(s,i),i.from=function(r,l,c){if(typeof r=="number")throw new TypeError("Argument must not be a number");return s(r,l,c)},i.alloc=function(r,l,c){if(typeof r!="number")throw new TypeError("Argument must be a number");var a=s(r);return l!==void 0?typeof c=="string"?a.fill(l,c):a.fill(l):a.fill(0),a},i.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return s(r)},i.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(r)}})(Le,Le.exports);var Ft=Le.exports;Ft.Buffer;var He=Be.crypto||Be.msCrypto;He&&He.getRandomValues;const Ie=(o,e=!1)=>{if(o!=null)return e?o.slice(0,10)+" @ "+o.slice(11,19):o.slice(0,10)+" @ "+o.slice(11,16)},ft=async(o,e,t,s,n="/",i=2e3)=>{try{return await(await fetch(o,{method:e,headers:t,body:s})).json()}catch(r){de(r,"danger","long")}},Ke=o=>(o.sort(function(e,t){return new Date(t.created)-new Date(e.created)}),o);function We(o){let e,t,s,n,i,r,l,c,a,u,d='<h1 class="text-warning svelte-ota6mw">Are you sure you want to remove this schedule ?</h1>',h,p,v="REMOVE",y,k;return{c(){e=g("div"),t=g("div"),s=g("div"),n=g("div"),i=B(o[1]),r=R(),l=g("i"),c=R(),a=g("div"),u=g("main"),u.innerHTML=d,h=R(),p=g("button"),p.textContent=v,this.h()},l(S){e=_(S,"DIV",{role:!0,class:!0});var C=w(e);t=_(C,"DIV",{class:!0});var E=w(t);s=_(E,"DIV",{class:!0});var O=w(s);n=_(O,"DIV",{class:!0,title:!0});var q=w(n);i=H(q,o[1]),q.forEach(m),r=L(O),l=_(O,"I",{class:!0,title:!0}),w(l).forEach(m),O.forEach(m),c=L(E),a=_(E,"DIV",{class:!0});var j=w(a);u=_(j,"MAIN",{class:!0,"data-svelte-h":!0}),K(u)!=="svelte-f03gh9"&&(u.innerHTML=d),h=L(j),p=_(j,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(p)!=="svelte-1d072jb"&&(p.textContent=v),j.forEach(m),E.forEach(m),C.forEach(m),this.h()},h(){f(n,"class","modal-title svelte-ota6mw"),f(n,"title","Player that will be removed"),f(l,"class","bi bi-x-circle-fill remove-icon"),f(l,"title","Close notification"),f(s,"class","header svelte-ota6mw"),f(u,"class","modal-content svelte-ota6mw"),f(p,"class","btn btn-outline-danger"),f(p,"title","Remove player from the list"),f(a,"class","body svelte-ota6mw"),f(t,"class","contents svelte-ota6mw"),f(e,"role","dialog"),f(e,"class","modal svelte-ota6mw")},m(S,C){P(S,e,C),b(e,t),b(t,s),b(s,n),b(n,i),b(s,r),b(s,l),b(t,c),b(t,a),b(a,u),b(a,h),b(a,p),y||(k=[$(l,"click",o[4]),$(p,"click",o[5])],y=!0)},p(S,C){C&2&&oe(i,S[1])},d(S){S&&m(e),y=!1,he(k)}}}function Mt(o){let e,t=o[0]&&We(o);return{c(){t&&t.c(),e=se()},l(s){t&&t.l(s),e=se()},m(s,n){t&&t.m(s,n),P(s,e,n)},p(s,[n]){s[0]?t?t.p(s,n):(t=We(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:A,o:A,d(s){s&&m(e),t&&t.d(s)}}}function $t(o,e,t){let{isOpen:s=!1}=e,{title:n="DEFAULT-Title"}=e,{data:i={}}=e;console.log("data :>> ",i);const r=async u=>{let d=new FormData;d.append("id",i==null?void 0:i.id);let h=await ft("?/remove_selected_schedule","POST",{},d),p=l(h);de(p.msg,p.type,p.time)},l=u=>{if(u.type=="success"){let d=JSON.parse(u.data),h={msg:"Schedule removed successfuly",type:u.type||"danger",time:"short",name:d[5]||"",id:d[4]||""};return d[1]==null&&console.log("parsedData :>> ",d),h}else console.log("error :>> PARSING THE JSON DATA HAS FAILED",u)};Pe(()=>{const u=document.getElementById("btn-close-modal");u&&u.focus()});const c=u=>{ye()},a=()=>{r(),ye()};return o.$$set=u=>{"isOpen"in u&&t(0,s=u.isOpen),"title"in u&&t(1,n=u.title),"data"in u&&t(3,i=u.data)},[s,n,r,i,c,a]}class Bt extends Q{constructor(e){super(),Y(this,e,$t,Mt,J,{isOpen:0,title:1,data:3})}}function ze(o,e,t){const s=o.slice();return s[6]=e[t],s}function Ht(o){let e,t="No schedules found, please create one";return{c(){e=g("div"),e.textContent=t,this.h()},l(s){e=_(s,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-17uoq2y"&&(e.textContent=t),this.h()},h(){f(e,"class","no-schedules")},m(s,n){P(s,e,n)},p:A,d(s){s&&m(e)}}}function Kt(o){let e,t=we(Ke(o[0])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Ge(ze(o,t,n));return{c(){e=g("ul");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=_(n,"UL",{class:!0});var i=w(e);for(let r=0;r<s.length;r+=1)s[r].l(i);i.forEach(m),this.h()},h(){f(e,"class","box-inset list-group svelte-1dcqs28")},m(n,i){P(n,e,i);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(n,i){if(i&7){t=we(Ke(n[0]));let r;for(r=0;r<t.length;r+=1){const l=ze(n,t,r);s[r]?s[r].p(l,i):(s[r]=Ge(l),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Ge(o){let e,t,s,n,i=o[6].name+"",r,l,c,a,u,d,h,p,v=Ie(o[6].created,!0)+"",y,k,S,C,E=Ie(o[6].updated,!0)+"",O,q,j,z,N,T,I;function D(...F){return o[4](o[6],...F)}function U(...F){return o[5](o[6],...F)}return{c(){e=g("li"),t=g("div"),s=g("div"),n=g("i"),r=B(i),l=R(),c=g("div"),a=g("i"),u=R(),d=g("div"),h=g("div"),p=B("Created: "),y=B(v),k=R(),S=g("div"),C=B("Last updated: "),O=B(E),q=R(),j=g("div"),z=R(),this.h()},l(F){e=_(F,"LI",{id:!0,class:!0});var V=w(e);t=_(V,"DIV",{class:!0});var re=w(t);s=_(re,"DIV",{class:!0});var le=w(s);n=_(le,"I",{});var Ce=w(n);r=H(Ce,i),Ce.forEach(m),le.forEach(m),l=L(re),c=_(re,"DIV",{class:!0});var Ue=w(c);a=_(Ue,"I",{class:!0,title:!0}),w(a).forEach(m),Ue.forEach(m),re.forEach(m),u=L(V),d=_(V,"DIV",{class:!0});var Te=w(d);h=_(Te,"DIV",{class:!0});var De=w(h);p=H(De,"Created: "),y=H(De,v),De.forEach(m),k=L(Te),S=_(Te,"DIV",{class:!0});var Ae=w(S);C=H(Ae,"Last updated: "),O=H(Ae,E),Ae.forEach(m),Te.forEach(m),q=L(V),j=_(V,"DIV",{}),w(j).forEach(m),z=L(V),V.forEach(m),this.h()},h(){f(s,"class","top-left"),f(a,"class","bi bi-x-circle-fill remove-icon svelte-1dcqs28"),f(a,"title","Clear"),f(c,"class","top-right"),f(t,"class","top svelte-1dcqs28"),f(h,"class","svelte-1dcqs28"),f(S,"class","svelte-1dcqs28"),f(d,"class","bottom svelte-1dcqs28"),f(e,"id",N="list-group-item-"+o[6].id),f(e,"class","list-group-item svelte-1dcqs28")},m(F,V){P(F,e,V),b(e,t),b(t,s),b(s,n),b(n,r),b(t,l),b(t,c),b(c,a),b(e,u),b(e,d),b(d,h),b(h,p),b(h,y),b(d,k),b(d,S),b(S,C),b(S,O),b(e,q),b(e,j),b(e,z),T||(I=[$(a,"click",D),$(e,"click",U)],T=!0)},p(F,V){o=F,V&1&&i!==(i=o[6].name+"")&&oe(r,i),V&1&&v!==(v=Ie(o[6].created,!0)+"")&&oe(y,v),V&1&&E!==(E=Ie(o[6].updated,!0)+"")&&oe(O,E),V&1&&N!==(N="list-group-item-"+o[6].id)&&f(e,"id",N)},d(F){F&&m(e),T=!1,he(I)}}}function Wt(o){let e,t,s="Schedules",n;function i(c,a){var u;return((u=c[0])==null?void 0:u.length)>0?Kt:Ht}let r=i(o),l=r(o);return{c(){e=g("div"),t=g("h5"),t.textContent=s,n=R(),l.c(),this.h()},l(c){e=_(c,"DIV",{class:!0});var a=w(e);t=_(a,"H5",{"data-svelte-h":!0}),K(t)!=="svelte-1p49y2g"&&(t.textContent=s),n=L(a),l.l(a),a.forEach(m),this.h()},h(){f(e,"class","browser-container svelte-1dcqs28")},m(c,a){P(c,e,a),b(e,t),b(e,n),l.m(e,null)},p(c,[a]){r===(r=i(c))&&l?l.p(c,a):(l.d(1),l=r(c),l&&(l.c(),l.m(e,null)))},i:A,o:A,d(c){c&&m(e),l.d()}}}function zt(o,e,t){let{schedules:s=[]}=e,{selectedSchedule:n=void 0}=e;const i=a=>{Ve(Bt,{isOpen:!0,title:"Remove "+(a==null?void 0:a.name),data:a})},r=(a,u)=>{let d=document.getElementById(a);if(d.classList.contains("disabled")==!1){let h=document.querySelectorAll(".list-group-item.active");if(h.length>0){for(const p of h)p.classList.remove("active");t(3,n=void 0)}d.classList.toggle("active"),t(3,n=u)}},l=(a,u)=>{i(a)},c=(a,u)=>{r(`list-group-item-${a.id}`,a)};return o.$$set=a=>{"schedules"in a&&t(0,s=a.schedules),"selectedSchedule"in a&&t(3,n=a.selectedSchedule)},[s,i,r,n,l,c]}class Gt extends Q{constructor(e){super(),Y(this,e,zt,Wt,J,{schedules:0,selectedSchedule:3})}}function Je(o){let e,t,s,n,i,r,l,c,a,u,d,h,p,v,y,k="ADD",S,C;return{c(){e=g("div"),t=g("div"),s=g("div"),n=g("div"),i=B(o[1]),r=R(),l=g("i"),c=R(),a=g("div"),u=g("main"),d=g("div"),h=g("div"),p=g("input"),v=R(),y=g("button"),y.textContent=k,this.h()},l(E){e=_(E,"DIV",{role:!0,class:!0});var O=w(e);t=_(O,"DIV",{class:!0});var q=w(t);s=_(q,"DIV",{class:!0});var j=w(s);n=_(j,"DIV",{class:!0,title:!0});var z=w(n);i=H(z,o[1]),z.forEach(m),r=L(j),l=_(j,"I",{class:!0,title:!0}),w(l).forEach(m),j.forEach(m),c=L(q),a=_(q,"DIV",{class:!0});var N=w(a);u=_(N,"MAIN",{class:!0});var T=w(u);d=_(T,"DIV",{class:!0});var I=w(d);h=_(I,"DIV",{class:!0});var D=w(h);p=_(D,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),D.forEach(m),I.forEach(m),v=L(T),y=_(T,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(y)!=="svelte-1nmd0dm"&&(y.textContent=k),T.forEach(m),N.forEach(m),q.forEach(m),O.forEach(m),this.h()},h(){f(n,"class","modal-title svelte-1kvx5t"),f(n,"title","Player that will be removed"),f(l,"class","bi bi-x-circle-fill remove-icon"),f(l,"title","Close notification"),f(s,"class","header svelte-1kvx5t"),f(p,"type","text"),f(p,"placeholder","Schedule Name"),f(p,"id","new-schedule-input"),f(p,"class","svelte-1kvx5t"),f(h,"class","val"),f(d,"class","box active-control svelte-1kvx5t"),f(y,"class","btn btn-primary btn-sm svelte-1kvx5t"),f(y,"title","Remove player from the list"),f(u,"class","modal-content svelte-1kvx5t"),f(a,"class","body svelte-1kvx5t"),f(t,"class","contents svelte-1kvx5t"),f(e,"role","dialog"),f(e,"class","modal svelte-1kvx5t")},m(E,O){P(E,e,O),b(e,t),b(t,s),b(s,n),b(n,i),b(s,r),b(s,l),b(t,c),b(t,a),b(a,u),b(u,d),b(d,h),b(h,p),Oe(p,o[2]),b(u,v),b(u,y),S||(C=[$(l,"click",o[5]),$(p,"input",o[6]),$(y,"click",o[7])],S=!0)},p(E,O){O&2&&oe(i,E[1]),O&4&&p.value!==E[2]&&Oe(p,E[2])},d(E){E&&m(e),S=!1,he(C)}}}function Jt(o){let e,t=o[0]&&Je(o);return{c(){t&&t.c(),e=se()},l(s){t&&t.l(s),e=se()},m(s,n){t&&t.m(s,n),P(s,e,n)},p(s,[n]){s[0]?t?t.p(s,n):(t=Je(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:A,o:A,d(s){s&&m(e),t&&t.d(s)}}}function Qt(o,e,t){let{isOpen:s=!1}=e,{title:n="DEFAULT-Title"}=e,{data:i={}}=e,r="";const l=async h=>{let p=document.getElementById("new-schedule-input");if(r.length>3){p.classList.contains("border-danger")&&p.classList.remove("border-danger");let v=new FormData;v.append("name",r);let y=await ft("?/add_new_schedule","POST",{},v);if(y!=null){let k=c(y);de(k.msg,k.type,k.time),ye(),t(2,r="")}}else p.focus(),p.classList.add("border-danger"),de("The schedule name should have min. 3 chars.","warning","short")},c=h=>{if(h.type=="success"){let p=JSON.parse(h.data),v={msg:"Schedule added successfuly",type:h.type||"danger",time:"short",name:p[5]||"",id:p[4]||""};return p[1]==null&&console.log("parsedData :>> ",p),v}else console.log("error :>> PARSING THE JSON DATA HAS FAILED",h)};Pe(()=>{const h=document.getElementById("btn-close-modal");h&&h.focus()});const a=h=>{ye()};function u(){r=this.value,t(2,r)}const d=h=>{l()};return o.$$set=h=>{"isOpen"in h&&t(0,s=h.isOpen),"title"in h&&t(1,n=h.title),"data"in h&&t(4,i=h.data)},[s,n,r,l,i,a,u,d]}class Yt extends Q{constructor(e){super(),Y(this,e,Qt,Jt,J,{isOpen:0,title:1,data:4})}}function Xt(o){let e,t,s,n;return{c(){e=g("div"),t=g("i"),this.h()},l(i){e=_(i,"DIV",{class:!0});var r=w(e);t=_(r,"I",{class:!0,title:!0}),w(t).forEach(m),r.forEach(m),this.h()},h(){f(t,"class","bi bi-plus-circle-fill add-schedule svelte-3de2wn"),f(t,"title","New Schedule"),G(t,"add-schedule-active",o[0]==!0),f(e,"class","controls-container svelte-3de2wn")},m(i,r){P(i,e,r),b(e,t),s||(n=$(t,"click",o[2]),s=!0)},p(i,[r]){r&1&&G(t,"add-schedule-active",i[0]==!0)},i:A,o:A,d(i){i&&m(e),s=!1,n()}}}function Zt(o,e,t){let{activeControl:s=!1}=e;const n=()=>{Ve(Yt,{isOpen:!0,title:"Add new Schedule ",data:{}})},i=()=>{n()};return o.$$set=r=>{"activeControl"in r&&t(0,s=r.activeControl)},[s,n,i]}class es extends Q{constructor(e){super(),Y(this,e,Zt,Xt,J,{activeControl:0})}}function ts(o){let e,t,s,n;return{c(){e=g("div"),t=g("input"),this.h()},l(i){e=_(i,"DIV",{class:!0});var r=w(e);t=_(r,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),r.forEach(m),this.h()},h(){f(t,"type","text"),f(t,"placeholder","Search Schedule"),f(t,"id","filter-schedule-input"),f(t,"class","svelte-1minll1"),f(e,"class","filter-container svelte-1minll1")},m(i,r){P(i,e,r),b(e,t),Oe(t,o[0]),s||(n=[$(t,"input",o[2]),$(t,"input",o[1])],s=!0)},p(i,[r]){r&1&&t.value!==i[0]&&Oe(t,i[0])},i:A,o:A,d(i){i&&m(e),s=!1,he(n)}}}function ss(o,e,t){let s;Se(o,ae,c=>t(3,s=c));let n="",i=s;const r=()=>{W(ae,s=s.filter(c=>new RegExp("^"+n.replace(/\*/g,".*")).test(c.name)),s),s.length==0&&W(ae,s=i,s),n.length==0&&W(ae,s=i,s)};function l(){n=this.value,t(0,n)}return[n,r,l]}class ns extends Q{constructor(e){super(),Y(this,e,ss,ts,J,{})}}function is(o){let e,t,s='<i class="bi bi-gear-fill" style="font-size:1rem;"></i> <span class="link-lbl svelte-1ffxvqx">Tasks</span>',n,i,r='<i class="bi bi-file-medical-fill" style="font-size:1rem;"></i> <span class="link-lbl svelte-1ffxvqx">Properties</span>',l,c,a='<i class="bi bi-file-earmark-bar-graph-fill" style="font-size:1rem;"></i> <span class="link-lbl svelte-1ffxvqx">Parameters</span>',u,d,h='<i class="bi bi-diagram-3-fill" style="font-size:1rem;"></i> <span class="link-lbl svelte-1ffxvqx">Interaction</span>',p,v;return{c(){e=g("div"),t=g("a"),t.innerHTML=s,n=R(),i=g("a"),i.innerHTML=r,l=R(),c=g("a"),c.innerHTML=a,u=R(),d=g("a"),d.innerHTML=h,this.h()},l(y){e=_(y,"DIV",{class:!0});var k=w(e);t=_(k,"A",{title:!0,class:!0,href:!0,role:!0,"data-svelte-h":!0}),K(t)!=="svelte-1r4owji"&&(t.innerHTML=s),n=L(k),i=_(k,"A",{title:!0,class:!0,href:!0,role:!0,"data-svelte-h":!0}),K(i)!=="svelte-1ck8xmo"&&(i.innerHTML=r),l=L(k),c=_(k,"A",{title:!0,class:!0,href:!0,role:!0,"data-svelte-h":!0}),K(c)!=="svelte-o6uf2k"&&(c.innerHTML=a),u=L(k),d=_(k,"A",{title:!0,class:!0,href:!0,role:!0,"data-svelte-h":!0}),K(d)!=="svelte-150p3vo"&&(d.innerHTML=h),k.forEach(m),this.h()},h(){f(t,"title","Tasks"),f(t,"class","nav-link svelte-1ffxvqx"),f(t,"href","#tasks"),f(t,"role","button"),G(t,"active-link",o[0]=="tasks"),f(i,"title","Properties"),f(i,"class","nav-link svelte-1ffxvqx"),f(i,"href","#properties"),f(i,"role","button"),G(i,"active-link",o[0]=="properties"),f(c,"title","Parameters"),f(c,"class","nav-link svelte-1ffxvqx"),f(c,"href","#parameters"),f(c,"role","button"),G(c,"active-link",o[0]=="parameters"),f(d,"title","Interaction"),f(d,"class","nav-link svelte-1ffxvqx"),f(d,"href","#interaction"),f(d,"role","button"),G(d,"active-link",o[0]=="interaction"),f(e,"class","schedule-nav svelte-1ffxvqx")},m(y,k){P(y,e,k),b(e,t),b(e,n),b(e,i),b(e,l),b(e,c),b(e,u),b(e,d),p||(v=[$(t,"click",o[1]),$(i,"click",o[2]),$(c,"click",o[3]),$(d,"click",o[4])],p=!0)},p(y,[k]){k&1&&G(t,"active-link",y[0]=="tasks"),k&1&&G(i,"active-link",y[0]=="properties"),k&1&&G(c,"active-link",y[0]=="parameters"),k&1&&G(d,"active-link",y[0]=="interaction")},i:A,o:A,d(y){y&&m(e),p=!1,he(v)}}}function rs(o,e,t){let s;return Se(o,be,c=>t(0,s=c)),[s,()=>{W(be,s="tasks",s)},()=>{W(be,s="properties",s)},()=>{W(be,s="parameters",s)},()=>{W(be,s="interaction",s)}]}class os extends Q{constructor(e){super(),Y(this,e,rs,is,J,{})}}const ls=async o=>await ce.collection("schedules_operations").getFullList({sort:"-created"}),as=async o=>await ce.collection("tasks_for_schedule").create(o),cs=async o=>await ce.collection("tasks_for_schedule").getFullList({sort:"-created",expand:"belongs_to, operation"}),ds=o=>ce.collection("tasks_for_schedule").delete(o);function Qe(o){var j,z,N;let e,t,s,n,i,r,l=((N=(z=(j=o[3])==null?void 0:j.expand)==null?void 0:z.operation)==null?void 0:N.name)+"",c,a,u,d,h,p,v,y,k,S;function C(T,I){return T[1]-1>-1?hs:us}let E=C(o),O=E(o),q=o[1]+1<o[2]&&Ye(o);return{c(){e=g("div"),t=g("div"),s=g("i"),i=R(),r=g("span"),c=B(l),a=R(),u=g("div"),d=g("div"),O.c(),h=R(),q&&q.c(),p=R(),v=g("i"),this.h()},l(T){e=_(T,"DIV",{role:!0,class:!0,id:!0});var I=w(e);t=_(I,"DIV",{class:!0});var D=w(t);s=_(D,"I",{class:!0}),w(s).forEach(m),i=L(D),r=_(D,"SPAN",{class:!0});var U=w(r);c=H(U,l),U.forEach(m),D.forEach(m),a=L(I),u=_(I,"DIV",{class:!0});var F=w(u);d=_(F,"DIV",{class:!0});var V=w(d);O.l(V),h=L(V),q&&q.l(V),p=L(V),v=_(V,"I",{class:!0,title:!0}),w(v).forEach(m),V.forEach(m),F.forEach(m),I.forEach(m),this.h()},h(){var T,I,D,U;f(s,"class",n="bi "+((D=(I=(T=o[3])==null?void 0:T.expand)==null?void 0:I.operation)==null?void 0:D.icon)+" svelte-ree39w"),f(r,"class","name svelte-ree39w"),f(t,"class","left-side svelte-ree39w"),f(v,"class","bi bi-x-circle-fill remove-icon"),f(v,"title","remove"),f(d,"class","controls"),f(u,"class","right-side"),f(e,"role","button"),f(e,"class","task svelte-ree39w"),f(e,"id",y="task-"+o[3].id),G(e,"selected-task",((U=o[0])==null?void 0:U.id)==o[3].id)},m(T,I){P(T,e,I),b(e,t),b(t,s),b(t,i),b(t,r),b(r,c),b(e,a),b(e,u),b(u,d),O.m(d,null),b(d,h),q&&q.m(d,null),b(d,p),b(d,v),k||(S=[$(v,"click",o[10]),$(e,"click",o[11])],k=!0)},p(T,I){var D,U,F,V,re,le,Ce;I&8&&n!==(n="bi "+((F=(U=(D=T[3])==null?void 0:D.expand)==null?void 0:U.operation)==null?void 0:F.icon)+" svelte-ree39w")&&f(s,"class",n),I&8&&l!==(l=((le=(re=(V=T[3])==null?void 0:V.expand)==null?void 0:re.operation)==null?void 0:le.name)+"")&&oe(c,l),E===(E=C(T))&&O?O.p(T,I):(O.d(1),O=E(T),O&&(O.c(),O.m(d,h))),T[1]+1<T[2]?q?q.p(T,I):(q=Ye(T),q.c(),q.m(d,p)):q&&(q.d(1),q=null),I&8&&y!==(y="task-"+T[3].id)&&f(e,"id",y),I&9&&G(e,"selected-task",((Ce=T[0])==null?void 0:Ce.id)==T[3].id)},d(T){T&&m(e),O.d(),q&&q.d(),k=!1,he(S)}}}function us(o){let e,t="";return{c(){e=g("i"),e.textContent=t},l(s){e=_(s,"I",{"data-svelte-h":!0}),K(e)!=="svelte-1ceb9ba"&&(e.textContent=t)},m(s,n){P(s,e,n)},p:A,d(s){s&&m(e)}}}function hs(o){let e,t,s;return{c(){e=g("i"),this.h()},l(n){e=_(n,"I",{class:!0,title:!0}),w(e).forEach(m),this.h()},h(){f(e,"class","bi bi-caret-up-fill normal-icon svelte-ree39w"),f(e,"title","remove")},m(n,i){P(n,e,i),t||(s=$(e,"click",o[8]),t=!0)},p:A,d(n){n&&m(e),t=!1,s()}}}function Ye(o){let e,t,s;return{c(){e=g("i"),this.h()},l(n){e=_(n,"I",{class:!0,title:!0}),w(e).forEach(m),this.h()},h(){f(e,"class","bi bi-caret-down-fill normal-icon svelte-ree39w"),f(e,"title","remove")},m(n,i){P(n,e,i),t||(s=$(e,"click",o[9]),t=!0)},p:A,d(n){n&&m(e),t=!1,s()}}}function fs(o){let e,t=o[3]!=null&&Qe(o);return{c(){t&&t.c(),e=se()},l(s){t&&t.l(s),e=se()},m(s,n){t&&t.m(s,n),P(s,e,n)},p(s,[n]){s[3]!=null?t?t.p(s,n):(t=Qe(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:A,o:A,d(s){s&&m(e),t&&t.d(s)}}}function Xe(o,e,t){if(e<0||e>=o.length)return"Index out of range";let s=o[e],n=t=="up"?o[e-1]:o[e+1],i=s;s=n,n=i;let r=t=="up"?e-1:e+1;return o[e]=s,o[r]=n,o}function ps(o,e,t){let s;Se(o,ue,k=>t(12,s=k));let{currentIndex:n}=e,{count:i=0}=e,{task:r={}}=e,{selectedTask:l=void 0}=e;const c=async k=>{try{await ds(k)==!0&&de("successfully removed the task","success","short")}catch(S){console.log("error :>> ",S),de("Failed to remove task","danger","long")}},a=k=>{let S=document.querySelectorAll(".selected-task");for(const C of S)C.classList.remove("selected-task")},u=(k,S)=>{k.stopPropagation(),a();let C=Xe(s,n,"up");W(ue,s=[...C],s)},d=(k,S)=>{k.stopPropagation(),a();let C=Xe(s,n,"down");W(ue,s=[...C],s)},h=k=>{u(k,r.id)},p=k=>{d(k,r.id)},v=()=>{c(r.id)},y=k=>{a(),t(0,l=r)};return o.$$set=k=>{"currentIndex"in k&&t(1,n=k.currentIndex),"count"in k&&t(2,i=k.count),"task"in k&&t(3,r=k.task),"selectedTask"in k&&t(0,l=k.selectedTask)},[l,n,i,r,c,a,u,d,h,p,v,y]}class ms extends Q{constructor(e){super(),Y(this,e,ps,fs,J,{currentIndex:1,count:2,task:3,selectedTask:0})}}function Ze(o,e,t){const s=o.slice();return s[12]=e[t],s[14]=t,s}function bs(o){let e,t,s,n,i,r=we(o[3]),l=[];for(let h=0;h<r.length;h+=1)l[h]=et(Ze(o,r,h));const c=h=>M(l[h],1,1,()=>{l[h]=null});function a(h,p){return h[1]==!1?ks:_s}let u=a(o),d=u(o);return{c(){e=g("div");for(let h=0;h<l.length;h+=1)l[h].c();t=R(),s=g("div"),n=g("div"),d.c(),this.h()},l(h){e=_(h,"DIV",{class:!0});var p=w(e);for(let k=0;k<l.length;k+=1)l[k].l(p);p.forEach(m),t=L(h),s=_(h,"DIV",{class:!0});var v=w(s);n=_(v,"DIV",{class:!0});var y=w(n);d.l(y),y.forEach(m),v.forEach(m),this.h()},h(){f(e,"class","box-inset tasks-container svelte-1v2jfh1"),G(e,"expanded-tasks",o[1]==!0),f(n,"class","expand-icon a-custom-simple-button"),f(s,"class","tasks-browser-controls svelte-1v2jfh1")},m(h,p){P(h,e,p);for(let v=0;v<l.length;v+=1)l[v]&&l[v].m(e,null);P(h,t,p),P(h,s,p),b(s,n),d.m(n,null),i=!0},p(h,p){if(p&9){r=we(h[3]);let v;for(v=0;v<r.length;v+=1){const y=Ze(h,r,v);l[v]?(l[v].p(y,p),x(l[v],1)):(l[v]=et(y),l[v].c(),x(l[v],1),l[v].m(e,null))}for(fe(),v=r.length;v<l.length;v+=1)c(v);pe()}(!i||p&2)&&G(e,"expanded-tasks",h[1]==!0),u===(u=a(h))&&d?d.p(h,p):(d.d(1),d=u(h),d&&(d.c(),d.m(n,null)))},i(h){if(!i){for(let p=0;p<r.length;p+=1)x(l[p]);i=!0}},o(h){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)M(l[p]);i=!1},d(h){h&&(m(e),m(t),m(s)),je(l,h),d.d()}}}function vs(o){let e,t;return e=new at({props:{type:"warning",title:"No tasks",message:"There are no tasks for this schedule yet!",spaceY:!1,action:"null"}}),{c(){X(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,n){ee(e,s,n),t=!0},p:A,i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function gs(o){let e;return{c(){e=B("loading data..")},l(t){e=H(t,"loading data..")},m(t,s){P(t,e,s)},p:A,i:A,o:A,d(t){t&&m(e)}}}function et(o){let e,t,s;function n(r){o[4](r)}let i={task:o[12],currentIndex:o[14],count:o[3].length};return o[0]!==void 0&&(i.selectedTask=o[0]),e=new ms({props:i}),ge.push(()=>ke(e,"selectedTask",n)),{c(){X(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,l){ee(e,r,l),s=!0},p(r,l){const c={};l&8&&(c.task=r[12]),l&8&&(c.count=r[3].length),!t&&l&1&&(t=!0,c.selectedTask=r[0],_e(()=>t=!1)),e.$set(c)},i(r){s||(x(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){te(e,r)}}}function _s(o){let e,t,s;return{c(){e=g("i"),this.h()},l(n){e=_(n,"I",{class:!0}),w(e).forEach(m),this.h()},h(){f(e,"class","expand-list-icon bi bi-arrows-angle-contract svelte-1v2jfh1")},m(n,i){P(n,e,i),t||(s=$(e,"click",o[6]),t=!0)},p:A,d(n){n&&m(e),t=!1,s()}}}function ks(o){let e,t,s;return{c(){e=g("i"),this.h()},l(n){e=_(n,"I",{class:!0}),w(e).forEach(m),this.h()},h(){f(e,"class","expand-list-icon bi bi-arrows-angle-expand t svelte-1v2jfh1")},m(n,i){P(n,e,i),t||(s=$(e,"click",o[5]),t=!0)},p:A,d(n){n&&m(e),t=!1,s()}}}function ys(o){let e,t,s,n;const i=[gs,vs,bs],r=[];function l(c,a){return c[2]==!1&&c[3].length==0?0:c[2]==!0&&c[3].length==0?1:2}return e=l(o),t=r[e]=i[e](o),{c(){t.c(),s=se()},l(c){t.l(c),s=se()},m(c,a){r[e].m(c,a),P(c,s,a),n=!0},p(c,[a]){let u=e;e=l(c),e===u?r[e].p(c,a):(fe(),M(r[u],1,1,()=>{r[u]=null}),pe(),t=r[e],t?t.p(c,a):(t=r[e]=i[e](c),t.c()),x(t,1),t.m(s.parentNode,s))},i(c){n||(x(t),n=!0)},o(c){M(t),n=!1},d(c){c&&m(s),r[e].d(c)}}}function ws(o,e,t){let s;Se(o,ue,y=>t(3,s=y));let n=!1,i=!1,{selectedTask:r=void 0}=e;const l=y=>{(s==null?void 0:s.length)>0?W(ue,s=[...s,y.record],s):W(ue,s=[y.record],s)},c=y=>{let k=s.filter(S=>S.id!=y.record.id);W(ue,s=[...k,y.record],s)},a=y=>{W(ue,s=s.filter(k=>k.id!=y.record.id),s)},u=()=>{var y;(y=ce.authStore)==null||y.loadFromCookie(document.cookie||""),ce.realtime.subscribe("tasks_for_schedule",function(k){switch(k.action){case"create":l(k);break;case"update":c(k);break;case"delete":a(k);break}},{expand:"belongs_to, operation"})},d=async()=>{W(ue,s=await cs(),s),setTimeout(()=>{t(2,i=!0)},500)};Pe(async()=>{await d(),u()}),lt(()=>{ce.collection("tasks_for_schedule").unsubscribe()});function h(y){r=y,t(0,r)}const p=()=>{t(1,n=!0)},v=()=>{t(1,n=!1)};return o.$$set=y=>{"selectedTask"in y&&t(0,r=y.selectedTask)},[r,n,i,s,h,p,v]}class Ss extends Q{constructor(e){super(),Y(this,e,ws,ys,J,{selectedTask:0})}}function tt(o,e,t){const s=o.slice();return s[10]=e[t],s}function st(o){let e,t,s,n,i,r,l,c,a,u,d,h,p,v="ADD",y,k,S={ctx:o,current:null,token:null,hasCatch:!0,pending:Es,then:Ts,catch:Cs,value:9,error:13};return vt(ls(),S),{c(){e=g("div"),t=g("div"),s=g("div"),n=g("div"),i=B(o[1]),r=R(),l=g("i"),c=R(),a=g("div"),u=g("main"),d=g("div"),S.block.c(),h=R(),p=g("button"),p.textContent=v,this.h()},l(C){e=_(C,"DIV",{role:!0,class:!0});var E=w(e);t=_(E,"DIV",{class:!0});var O=w(t);s=_(O,"DIV",{class:!0});var q=w(s);n=_(q,"DIV",{class:!0,title:!0});var j=w(n);i=H(j,o[1]),j.forEach(m),r=L(q),l=_(q,"I",{class:!0,title:!0}),w(l).forEach(m),q.forEach(m),c=L(O),a=_(O,"DIV",{class:!0});var z=w(a);u=_(z,"MAIN",{class:!0});var N=w(u);d=_(N,"DIV",{class:!0});var T=w(d);S.block.l(T),T.forEach(m),h=L(N),p=_(N,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(p)!=="svelte-12q4dc5"&&(p.textContent=v),N.forEach(m),z.forEach(m),O.forEach(m),E.forEach(m),this.h()},h(){f(n,"class","modal-title svelte-1bmou38"),f(n,"title","Player that will be removed"),f(l,"class","bi bi-x-circle-fill remove-icon"),f(l,"title","Close notification"),f(s,"class","header svelte-1bmou38"),f(d,"class","box operations-container svelte-1bmou38"),f(p,"class","btn btn-primary btn-sm svelte-1bmou38"),f(p,"title","Remove player from the list"),f(u,"class","modal-content svelte-1bmou38"),f(a,"class","body svelte-1bmou38"),f(t,"class","contents svelte-1bmou38"),f(e,"role","dialog"),f(e,"class","modal svelte-1bmou38")},m(C,E){P(C,e,E),b(e,t),b(t,s),b(s,n),b(n,i),b(s,r),b(s,l),b(t,c),b(t,a),b(a,u),b(u,d),S.block.m(d,S.anchor=null),S.mount=()=>d,S.anchor=null,b(u,h),b(u,p),y||(k=[$(l,"click",o[6]),$(p,"click",o[8])],y=!0)},p(C,E){o=C,E&2&&oe(i,o[1]),gt(S,o,E)},d(C){C&&m(e),S.block.d(),S.token=null,S=null,y=!1,he(k)}}}function Cs(o){let e,t;return{c(){e=B("error loading operations:: "),t=B(o[13])},l(s){e=H(s,"error loading operations:: "),t=H(s,o[13])},m(s,n){P(s,e,n),P(s,t,n)},p:A,d(s){s&&(m(e),m(t))}}}function Ts(o){let e,t=we(o[9]),s=[];for(let n=0;n<t.length;n+=1)s[n]=nt(tt(o,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=se()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=se()},m(n,i){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(n,i);P(n,e,i)},p(n,i){if(i&4){t=we(n[9]);let r;for(r=0;r<t.length;r+=1){const l=tt(n,t,r);s[r]?s[r].p(l,i):(s[r]=nt(l),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function nt(o){let e,t,s,n,i=o[10].name+"",r,l,c,a;function u(){return o[7](o[10])}return{c(){e=g("div"),t=g("i"),s=R(),n=g("span"),r=B(i),l=R(),this.h()},l(d){e=_(d,"DIV",{role:!0,class:!0,id:!0});var h=w(e);t=_(h,"I",{class:!0}),w(t).forEach(m),s=L(h),n=_(h,"SPAN",{class:!0});var p=w(n);r=H(p,i),p.forEach(m),l=L(h),h.forEach(m),this.h()},h(){var d;f(t,"class","bi "+o[10].icon+" svelte-1bmou38"),f(n,"class","name"),f(e,"role","button"),f(e,"class","operation svelte-1bmou38"),f(e,"id","op-"+o[10].id),G(e,"selected-operation",((d=o[2])==null?void 0:d.id)==o[10].id)},m(d,h){P(d,e,h),b(e,t),b(e,s),b(e,n),b(n,r),b(e,l),c||(a=$(e,"click",u),c=!0)},p(d,h){var p;o=d,h&4&&G(e,"selected-operation",((p=o[2])==null?void 0:p.id)==o[10].id)},d(d){d&&m(e),c=!1,a()}}}function Es(o){let e;return{c(){e=B("loading operations")},l(t){e=H(t,"loading operations")},m(t,s){P(t,e,s)},p:A,d(t){t&&m(e)}}}function Is(o){let e,t=o[0]&&st(o);return{c(){t&&t.c(),e=se()},l(s){t&&t.l(s),e=se()},m(s,n){t&&t.m(s,n),P(s,e,n)},p(s,[n]){s[0]?t?t.p(s,n):(t=st(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:A,o:A,d(s){s&&m(e),t&&t.d(s)}}}function Os(o,e,t){let{isOpen:s=!1}=e,{title:n="DEFAULT-Title"}=e,{selectedSchedule:i={}}=e,{data:r}=e,l;const c=async h=>{const p={belongs_to:i==null?void 0:i.id,operation:l==null?void 0:l.id};await as(p)!=null?de("Operation added with success","success","short"):de("Adding operation failed","danger","long"),ye()},a=h=>{ye()},u=h=>{t(2,l=h)},d=h=>{c()};return o.$$set=h=>{"isOpen"in h&&t(0,s=h.isOpen),"title"in h&&t(1,n=h.title),"selectedSchedule"in h&&t(4,i=h.selectedSchedule),"data"in h&&t(5,r=h.data)},[s,n,l,c,i,r,a,u,d]}class Ps extends Q{constructor(e){super(),Y(this,e,Os,Is,J,{isOpen:0,title:1,selectedSchedule:4,data:5})}}function Ds(o){let e,t,s='<i class="bi bi-gear-fill svelte-1ozzn50" style="font-size: 1rem;"></i> <span class="link-lbl">new task</span>',n,i,r='<i class="bi bi-gear-fill svelte-1ozzn50" style="font-size: 1rem;"></i> <span class="link-lbl">other task</span>',l,c;return{c(){e=g("div"),t=g("a"),t.innerHTML=s,n=R(),i=g("a"),i.innerHTML=r,this.h()},l(a){e=_(a,"DIV",{class:!0});var u=w(e);t=_(u,"A",{title:!0,class:!0,href:!0,role:!0,"data-svelte-h":!0}),K(t)!=="svelte-746bd"&&(t.innerHTML=s),n=L(u),i=_(u,"A",{title:!0,class:!0,href:!0,role:!0,"data-svelte-h":!0}),K(i)!=="svelte-wierjj"&&(i.innerHTML=r),u.forEach(m),this.h()},h(){f(t,"title","Tasks"),f(t,"class","a-custom-simple-button"),f(t,"href","#"),f(t,"role","button"),f(i,"title","Tasks"),f(i,"class","a-custom-simple-button"),f(i,"href","#"),f(i,"role","button"),f(e,"class","box tasks-controls svelte-1ozzn50")},m(a,u){P(a,e,u),b(e,t),b(e,n),b(e,i),l||(c=[$(t,"click",o[0]),$(i,"click",o[1])],l=!0)},p:A,i:A,o:A,d(a){a&&m(e),l=!1,he(c)}}}function As(o,e,t){let{selectedSchedule:s=void 0}=e;const n=()=>{s!=null?Ve(Ps,{isOpen:!0,title:"Add New Task ",selectedSchedule:s,data:{}}):de("Please select a schedule first","danger","long")},i=()=>{de("coming soon..","success","stay")};return o.$$set=r=>{"selectedSchedule"in r&&t(2,s=r.selectedSchedule)},[n,i,s]}class qs extends Q{constructor(e){super(),Y(this,e,As,Ds,J,{selectedSchedule:2})}}function Rs(o){let e,t,s,n,i,r,l,c;function a(p){o[2](p)}let u={};o[0]!==void 0&&(u.selectedSchedule=o[0]),t=new qs({props:u}),ge.push(()=>ke(t,"selectedSchedule",a));function d(p){o[3](p)}let h={};return o[1]!==void 0&&(h.selectedTask=o[1]),r=new Ss({props:h}),ge.push(()=>ke(r,"selectedTask",d)),{c(){e=g("div"),X(t.$$.fragment),n=R(),i=g("div"),X(r.$$.fragment),this.h()},l(p){e=_(p,"DIV",{class:!0});var v=w(e);Z(t.$$.fragment,v),n=L(v),i=_(v,"DIV",{class:!0,id:!0});var y=w(i);Z(r.$$.fragment,y),y.forEach(m),v.forEach(m),this.h()},h(){f(i,"class","tasks-container svelte-1cohsfc"),f(i,"id","tasks"),f(e,"class","tasks-container-and-controls svelte-1cohsfc")},m(p,v){P(p,e,v),ee(t,e,null),b(e,n),b(e,i),ee(r,i,null),c=!0},p(p,[v]){const y={};!s&&v&1&&(s=!0,y.selectedSchedule=p[0],_e(()=>s=!1)),t.$set(y);const k={};!l&&v&2&&(l=!0,k.selectedTask=p[1],_e(()=>l=!1)),r.$set(k)},i(p){c||(x(t.$$.fragment,p),x(r.$$.fragment,p),c=!0)},o(p){M(t.$$.fragment,p),M(r.$$.fragment,p),c=!1},d(p){p&&m(e),te(t),te(r)}}}function Ls(o,e,t){let{selectedSchedule:s}=e,{selectedTask:n=void 0}=e;function i(l){s=l,t(0,s)}function r(l){n=l,t(1,n)}return o.$$set=l=>{"selectedSchedule"in l&&t(0,s=l.selectedSchedule),"selectedTask"in l&&t(1,n=l.selectedTask)},[s,n,i,r]}class js extends Q{constructor(e){super(),Y(this,e,Ls,Rs,J,{selectedSchedule:0,selectedTask:1})}}function Ns(o){let e;return{c(){e=B("properties.svelte")},l(t){e=H(t,"properties.svelte")},m(t,s){P(t,e,s)},p:A,i:A,o:A,d(t){t&&m(e)}}}class Vs extends Q{constructor(e){super(),Y(this,e,null,Ns,J,{})}}function xs(o){let e;return{c(){e=B("parameters.svelte")},l(t){e=H(t,"parameters.svelte")},m(t,s){P(t,e,s)},p:A,i:A,o:A,d(t){t&&m(e)}}}class Us extends Q{constructor(e){super(),Y(this,e,null,xs,J,{})}}function Fs(o){let e;return{c(){e=B("Interaction.svelte")},l(t){e=H(t,"Interaction.svelte")},m(t,s){P(t,e,s)},p:A,i:A,o:A,d(t){t&&m(e)}}}class Ms extends Q{constructor(e){super(),Y(this,e,null,Fs,J,{})}}function $s(o){let e,t=o[2].name+"",s;return{c(){e=g("div"),s=B(t),this.h()},l(n){e=_(n,"DIV",{class:!0});var i=w(e);s=H(i,t),i.forEach(m),this.h()},h(){f(e,"class","text-success")},m(n,i){P(n,e,i),b(e,s)},p(n,i){i&4&&t!==(t=n[2].name+"")&&oe(s,t)},d(n){n&&m(e)}}}function Bs(o){let e,t="Select a schedule";return{c(){e=g("span"),e.textContent=t,this.h()},l(s){e=_(s,"SPAN",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-t5kuxn"&&(e.textContent=t),this.h()},h(){f(e,"class","text-warning")},m(s,n){P(s,e,n)},p:A,d(s){s&&m(e)}}}function it(o){let e,t,s,n,i,r;t=new os({});const l=[zs,Ws,Ks,Hs],c=[];function a(u,d){return u[4]=="tasks"?0:u[4]=="properties"?1:u[4]=="parameters"?2:u[4]=="interaction"?3:-1}return~(n=a(o))&&(i=c[n]=l[n](o)),{c(){e=g("div"),X(t.$$.fragment),s=R(),i&&i.c(),this.h()},l(u){e=_(u,"DIV",{class:!0});var d=w(e);Z(t.$$.fragment,d),s=L(d),i&&i.l(d),d.forEach(m),this.h()},h(){f(e,"class","box schedule-navigation-box")},m(u,d){P(u,e,d),ee(t,e,null),b(e,s),~n&&c[n].m(e,null),r=!0},p(u,d){let h=n;n=a(u),n===h?~n&&c[n].p(u,d):(i&&(fe(),M(c[h],1,1,()=>{c[h]=null}),pe()),~n?(i=c[n],i?i.p(u,d):(i=c[n]=l[n](u),i.c()),x(i,1),i.m(e,null)):i=null)},i(u){r||(x(t.$$.fragment,u),x(i),r=!0)},o(u){M(t.$$.fragment,u),M(i),r=!1},d(u){u&&m(e),te(t),~n&&c[n].d()}}}function Hs(o){let e,t,s;return t=new Ms({}),{c(){e=g("div"),X(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var i=w(e);Z(t.$$.fragment,i),i.forEach(m),this.h()},h(){f(e,"class","box-inset")},m(n,i){P(n,e,i),ee(t,e,null),s=!0},p:A,i(n){s||(x(t.$$.fragment,n),s=!0)},o(n){M(t.$$.fragment,n),s=!1},d(n){n&&m(e),te(t)}}}function Ks(o){let e,t,s;return t=new Us({}),{c(){e=g("div"),X(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var i=w(e);Z(t.$$.fragment,i),i.forEach(m),this.h()},h(){f(e,"class","box-inset")},m(n,i){P(n,e,i),ee(t,e,null),s=!0},p:A,i(n){s||(x(t.$$.fragment,n),s=!0)},o(n){M(t.$$.fragment,n),s=!1},d(n){n&&m(e),te(t)}}}function Ws(o){let e,t,s;return t=new Vs({}),{c(){e=g("div"),X(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var i=w(e);Z(t.$$.fragment,i),i.forEach(m),this.h()},h(){f(e,"class","box-inset")},m(n,i){P(n,e,i),ee(t,e,null),s=!0},p:A,i(n){s||(x(t.$$.fragment,n),s=!0)},o(n){M(t.$$.fragment,n),s=!1},d(n){n&&m(e),te(t)}}}function zs(o){let e,t,s,n,i,r;function l(u){o[7](u)}let c={selectedSchedule:o[2]};o[3]!==void 0&&(c.selectedTask=o[3]),t=new js({props:c}),ge.push(()=>ke(t,"selectedTask",l));let a=o[3]!=null&&rt(o);return{c(){e=g("div"),X(t.$$.fragment),n=R(),a&&a.c(),i=se(),this.h()},l(u){e=_(u,"DIV",{class:!0});var d=w(e);Z(t.$$.fragment,d),d.forEach(m),n=L(u),a&&a.l(u),i=se(),this.h()},h(){f(e,"class","")},m(u,d){P(u,e,d),ee(t,e,null),P(u,n,d),a&&a.m(u,d),P(u,i,d),r=!0},p(u,d){const h={};d&4&&(h.selectedSchedule=u[2]),!s&&d&8&&(s=!0,h.selectedTask=u[3],_e(()=>s=!1)),t.$set(h),u[3]!=null?a?(a.p(u,d),d&8&&x(a,1)):(a=rt(u),a.c(),x(a,1),a.m(i.parentNode,i)):a&&(fe(),M(a,1,1,()=>{a=null}),pe())},i(u){r||(x(t.$$.fragment,u),x(a),r=!0)},o(u){M(t.$$.fragment,u),M(a),r=!1},d(u){u&&(m(e),m(n),m(i)),te(t),a&&a.d(u)}}}function rt(o){let e,t,s,n="Name",i,r,l,c="Selected:",a,u,d=o[3].expand.operation.name+"",h,p,v,y,k="Formula",S,C,E,O;const q=[Js,Gs],j=[];function z(N,T){return N[3].expand.operation.formula!=null?0:1}return C=z(o),E=j[C]=q[C](o),{c(){e=g("div"),t=g("fieldset"),s=g("legend"),s.textContent=n,i=R(),r=g("div"),l=g("div"),l.textContent=c,a=R(),u=g("div"),h=B(d),p=R(),v=g("fieldset"),y=g("legend"),y.textContent=k,S=R(),E.c(),this.h()},l(N){e=_(N,"DIV",{class:!0});var T=w(e);t=_(T,"FIELDSET",{});var I=w(t);s=_(I,"LEGEND",{"data-svelte-h":!0}),K(s)!=="svelte-1qad6r"&&(s.textContent=n),i=L(I),r=_(I,"DIV",{class:!0});var D=w(r);l=_(D,"DIV",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-197phuw"&&(l.textContent=c),a=L(D),u=_(D,"DIV",{class:!0});var U=w(u);h=H(U,d),U.forEach(m),D.forEach(m),I.forEach(m),p=L(T),v=_(T,"FIELDSET",{});var F=w(v);y=_(F,"LEGEND",{"data-svelte-h":!0}),K(y)!=="svelte-17acwfk"&&(y.textContent=k),S=L(F),E.l(F),F.forEach(m),T.forEach(m),this.h()},h(){f(l,"class","label"),f(u,"class","val"),f(r,"class","box fieldset-content svelte-1og4gcg"),f(e,"class","box selected-task-container")},m(N,T){P(N,e,T),b(e,t),b(t,s),b(t,i),b(t,r),b(r,l),b(r,a),b(r,u),b(u,h),b(e,p),b(e,v),b(v,y),b(v,S),j[C].m(v,null),O=!0},p(N,T){(!O||T&8)&&d!==(d=N[3].expand.operation.name+"")&&oe(h,d);let I=C;C=z(N),C===I?j[C].p(N,T):(fe(),M(j[I],1,1,()=>{j[I]=null}),pe(),E=j[C],E?E.p(N,T):(E=j[C]=q[C](N),E.c()),x(E,1),E.m(v,null))},i(N){O||(x(E),O=!0)},o(N){M(E),O=!1},d(N){N&&m(e),j[C].d()}}}function Gs(o){let e,t,s;return t=new at({props:{type:"warning",title:"No formula",message:"There no formula for this task",spaceY:!1,action:"null"}}),{c(){e=g("div"),X(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var i=w(e);Z(t.$$.fragment,i),i.forEach(m),this.h()},h(){f(e,"class","box")},m(n,i){P(n,e,i),ee(t,e,null),s=!0},p:A,i(n){s||(x(t.$$.fragment,n),s=!0)},o(n){M(t.$$.fragment,n),s=!1},d(n){n&&m(e),te(t)}}}function Js(o){let e,t,s,n="Action:",i,r,l=o[3].expand.operation.formula.action+"",c,a,u,d,h="Repeat:",p,v,y=o[3].expand.operation.formula.times+"",k;return{c(){e=g("div"),t=g("div"),s=g("div"),s.textContent=n,i=R(),r=g("div"),c=B(l),a=R(),u=g("div"),d=g("div"),d.textContent=h,p=R(),v=g("div"),k=B(y),this.h()},l(S){e=_(S,"DIV",{class:!0});var C=w(e);t=_(C,"DIV",{class:!0});var E=w(t);s=_(E,"DIV",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-k1n8n5"&&(s.textContent=n),i=L(E),r=_(E,"DIV",{class:!0});var O=w(r);c=H(O,l),O.forEach(m),E.forEach(m),a=L(C),u=_(C,"DIV",{class:!0});var q=w(u);d=_(q,"DIV",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-1ol7oy6"&&(d.textContent=h),p=L(q),v=_(q,"DIV",{class:!0});var j=w(v);k=H(j,y),j.forEach(m),q.forEach(m),C.forEach(m),this.h()},h(){f(s,"class","label"),f(r,"class","val"),f(t,"class","fieldset-content svelte-1og4gcg"),f(d,"class","label"),f(v,"class","val"),f(u,"class","fieldset-content svelte-1og4gcg"),f(e,"class","box")},m(S,C){P(S,e,C),b(e,t),b(t,s),b(t,i),b(t,r),b(r,c),b(e,a),b(e,u),b(u,d),b(u,p),b(u,v),b(v,k)},p(S,C){C&8&&l!==(l=S[3].expand.operation.formula.action+"")&&oe(c,l),C&8&&y!==(y=S[3].expand.operation.formula.times+"")&&oe(k,y)},i:A,o:A,d(S){S&&m(e)}}}function Qs(o){let e,t,s,n,i,r,l,c,a,u,d,h,p,v,y="Selected Schedule:",k,S,C;function E(D){o[5](D)}let O={};o[1]!==void 0&&(O.activeControl=o[1]),s=new es({props:O}),ge.push(()=>ke(s,"activeControl",E)),r=new ns({});function q(D){o[6](D)}let j={schedules:o[0]};o[2]!==void 0&&(j.selectedSchedule=o[2]),a=new Gt({props:j}),ge.push(()=>ke(a,"selectedSchedule",q));function z(D,U){return D[2]==null?Bs:$s}let N=z(o),T=N(o),I=o[2]!=null&&it(o);return{c(){e=g("div"),t=g("div"),X(s.$$.fragment),i=R(),X(r.$$.fragment),l=R(),c=g("div"),X(a.$$.fragment),d=R(),h=g("div"),p=g("div"),v=g("span"),v.textContent=y,k=R(),T.c(),S=R(),I&&I.c(),this.h()},l(D){e=_(D,"DIV",{class:!0});var U=w(e);t=_(U,"DIV",{class:!0});var F=w(t);Z(s.$$.fragment,F),i=L(F),Z(r.$$.fragment,F),F.forEach(m),l=L(U),c=_(U,"DIV",{});var V=w(c);Z(a.$$.fragment,V),V.forEach(m),d=L(U),h=_(U,"DIV",{});var re=w(h);p=_(re,"DIV",{class:!0});var le=w(p);v=_(le,"SPAN",{class:!0,"data-svelte-h":!0}),K(v)!=="svelte-uusoir"&&(v.textContent=y),k=L(le),T.l(le),le.forEach(m),S=L(re),I&&I.l(re),re.forEach(m),U.forEach(m),this.h()},h(){f(t,"class","controls-and-filter-container svelte-1og4gcg"),f(v,"class","lbl"),f(p,"class","schedule-title svelte-1og4gcg"),f(e,"class","explorer-container svelte-1og4gcg")},m(D,U){P(D,e,U),b(e,t),ee(s,t,null),b(t,i),ee(r,t,null),b(e,l),b(e,c),ee(a,c,null),b(e,d),b(e,h),b(h,p),b(p,v),b(p,k),T.m(p,null),b(h,S),I&&I.m(h,null),C=!0},p(D,[U]){const F={};!n&&U&2&&(n=!0,F.activeControl=D[1],_e(()=>n=!1)),s.$set(F);const V={};U&1&&(V.schedules=D[0]),!u&&U&4&&(u=!0,V.selectedSchedule=D[2],_e(()=>u=!1)),a.$set(V),N===(N=z(D))&&T?T.p(D,U):(T.d(1),T=N(D),T&&(T.c(),T.m(p,null))),D[2]!=null?I?(I.p(D,U),U&4&&x(I,1)):(I=it(D),I.c(),x(I,1),I.m(h,null)):I&&(fe(),M(I,1,1,()=>{I=null}),pe())},i(D){C||(x(s.$$.fragment,D),x(r.$$.fragment,D),x(a.$$.fragment,D),x(I),C=!0)},o(D){M(s.$$.fragment,D),M(r.$$.fragment,D),M(a.$$.fragment,D),M(I),C=!1},d(D){D&&m(e),te(s),te(r),te(a),T.d(),I&&I.d()}}}function Ys(o,e,t){let s;Se(o,be,d=>t(4,s=d));let n=!1,i,r,{data:l}=e;function c(d){n=d,t(1,n)}function a(d){i=d,t(2,i)}function u(d){r=d,t(3,r)}return o.$$set=d=>{"data"in d&&t(0,l=d.data)},[l,n,i,r,s,c,a,u]}class Xs extends Q{constructor(e){super(),Y(this,e,Ys,Qs,J,{data:0})}}const{document:ot}=_t;function Zs(o){let e,t;return e=new Xs({props:{data:o[1]}}),{c(){X(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,n){ee(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.data=s[1]),e.$set(i)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function en(o){let e,t='<img src="https://media1.tenor.com/m/-n8JvVIqBXkAAAAC/dddd.gif" alt="spinner" width="50px"/> <div>loading data..</div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=_(s,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-32hux5"&&(e.innerHTML=t),this.h()},h(){f(e,"class","center-of-page svelte-ztl7ip")},m(s,n){P(s,e,n)},p:A,i:A,o:A,d(s){s&&m(e)}}}function tn(o){let e,t,s,n,i;ot.title="Schedule Editor - "+mt;const r=[en,Zs],l=[];function c(a,u){return a[0]==!0?0:1}return s=c(o),n=l[s]=r[s](o),{c(){e=R(),t=g("div"),n.c(),this.h()},l(a){pt("svelte-uqxn7k",ot.head).forEach(m),e=L(a),t=_(a,"DIV",{class:!0});var d=w(t);n.l(d),d.forEach(m),this.h()},h(){f(t,"class","content container-fluid fill-height svelte-ztl7ip")},m(a,u){P(a,e,u),P(a,t,u),l[s].m(t,null),i=!0},p(a,[u]){let d=s;s=c(a),s===d?l[s].p(a,u):(fe(),M(l[d],1,1,()=>{l[d]=null}),pe(),n=l[s],n?n.p(a,u):(n=l[s]=r[s](a),n.c()),x(n,1),n.m(t,null))},i(a){i||(x(n),i=!0)},o(a){M(n),i=!1},d(a){a&&(m(e),m(t)),l[s].d()}}}function sn(o,e,t){let s;Se(o,ae,d=>t(1,s=d));let{data:n}=e,i=!0;const r=d=>{(s==null?void 0:s.length)>0?W(ae,s=[...s,d.record],s):W(ae,s=[d.record],s)},l=d=>{let h=s.filter(p=>p.id!=d.record.id);W(ae,s=[...h,d.record],s)},c=d=>{console.log("$allSchedules :>> ",s),W(ae,s=s.filter(h=>h.id!=d.record.id),s)},a=()=>{var d;(d=ce.authStore)==null||d.loadFromCookie(document.cookie||""),ce.realtime.subscribe("schedules",function(h){switch(h.action){case"create":r(h);break;case"update":l(h);break;case"delete":c(h);break}},{})},u=()=>{setTimeout(()=>{W(ae,s=n.schedules.items||[],s),t(0,i=!1)},500)};return lt(()=>{ce.collection("schedules").unsubscribe()}),Pe(async()=>{u(),a()}),o.$$set=d=>{"data"in d&&t(2,n=d.data)},[i,s,n]}class dn extends Q{constructor(e){super(),Y(this,e,sn,tn,J,{data:2})}}export{dn as component};
